### ⚙️ Notification Settings API 시나리오 테스트

@baseUrl = http://localhost:8084
@userId = user123

### 📋 1. 사용자 알림 설정 조회
GET {{baseUrl}}/api/v1/users/{{userId}}/notification-settings

### ✏️ 2. 기본 알림 설정 업데이트
PUT {{baseUrl}}/api/v1/users/{{userId}}/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": true,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": false,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  },
  "channelSettings": null,
  "enabled": true,
  "channels": ["EMAIL", "DISCORD"]
}

### 🔕 3. 방해금지 시간 설정
PUT {{baseUrl}}/api/v1/users/{{userId}}/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": true,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": true,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  },
  "channelSettings": null,
  "enabled": true,
  "channels": ["EMAIL", "DISCORD"]
}

### 🌙 4. 주말 방해금지 시간 설정
PUT {{baseUrl}}/api/v1/users/{{userId}}/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": true,
  "emailEnabled": true,
  "discordEnabled": false,
  "pushEnabled": true,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": true,
    "startTime": "23:00",
    "endTime": "09:00",
    "weekendsOnly": true
  },
  "channelSettings": {
    "email": {
      "priority": "high",
      "format": "html"
    },
    "push": {
      "sound": "default",
      "vibration": true
    }
  },
  "enabled": true,
  "channels": ["EMAIL", "PUSH"]
}

### 📱 5. 모든 채널 활성화
PUT {{baseUrl}}/api/v1/users/{{userId}}/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": true,
  "emailEnabled": true,
  "discordEnabled": true,
  "pushEnabled": true,
  "timezone": "America/New_York",
  "language": "en",
  "quietHours": {
    "enabled": false,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  },
  "channelSettings": {
    "email": {
      "priority": "medium",
      "format": "text"
    },
    "discord": {
      "webhook": "https://discord.com/api/webhooks/custom"
    },
    "push": {
      "sound": "notification",
      "vibration": false
    }
  },
  "enabled": true,
  "channels": ["EMAIL", "DISCORD", "PUSH"]
}

### ❌ 6. 모든 알림 비활성화
PUT {{baseUrl}}/api/v1/users/{{userId}}/notification-settings
Content-Type: application/json

{
  "studyUpdates": false,
  "marketing": false,
  "emailEnabled": false,
  "discordEnabled": false,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": false,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  },
  "channelSettings": null,
  "enabled": false,
  "channels": []
}

### 🔄 7. 설정 초기화
POST {{baseUrl}}/api/v1/users/{{userId}}/notification-settings/reset

### 🧪 8. 도메인 로직 테스트 - 채널 개별 활성화/비활성화
PUT {{baseUrl}}/api/v1/users/domain-test-1/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": false,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": false,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  }
}

### 🧪 9. 도메인 로직 테스트 - 이벤트 타입별 활성화 검증
PUT {{baseUrl}}/api/v1/users/domain-test-2/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": true,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": false,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  }
}

### 🧪 10. 도메인 로직 테스트 - 방해금지 시간 경계값 테스트
PUT {{baseUrl}}/api/v1/users/quiet-hours-test/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": false,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": true,
    "startTime": "23:59",
    "endTime": "00:01",
    "weekendsOnly": false
  }
}

### 🧪 11. 도메인 로직 테스트 - 자정을 넘는 방해금지 시간
PUT {{baseUrl}}/api/v1/users/midnight-test/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": true,
  "emailEnabled": true,
  "discordEnabled": true,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": true,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  }
}

### 🧪 12. 엣지 케이스 테스트 - null 값으로 설정 생성
PUT {{baseUrl}}/api/v1/users/null-test/notification-settings
Content-Type: application/json

{
  "studyUpdates": false,
  "marketing": false,
  "emailEnabled": false,
  "discordEnabled": false,
  "pushEnabled": false,
  "timezone": null,
  "language": null,
  "quietHours": null
}

### 🧪 13. 엣지 케이스 테스트 - 빈 문자열 처리
PUT {{baseUrl}}/api/v1/users/empty-string-test/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": false,
  "pushEnabled": false,
  "timezone": "",
  "language": "",
  "quietHours": {
    "enabled": false,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  }
}

### 🧪 14. 도메인 로직 테스트 - 완전 비활성화 상태 확인
PUT {{baseUrl}}/api/v1/users/completely-disabled/notification-settings
Content-Type: application/json

{
  "studyUpdates": false,
  "marketing": false,
  "emailEnabled": false,
  "discordEnabled": false,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": false,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  }
}

### 📊 15. 대량 설정 조회 (여러 사용자)
POST {{baseUrl}}/api/v1/notification-settings/bulk
Content-Type: application/json

["user123", "user456", "user789"]

### 📊 16. 특정 이벤트 타입으로 필터링된 대량 조회
POST {{baseUrl}}/api/v1/notification-settings/bulk?eventType=STUDY_APPROVED
Content-Type: application/json

["user123", "user456", "user789", "user101", "user202"]

### ❌ 17. 존재하지 않는 사용자 설정 조회 (404 테스트)
GET {{baseUrl}}/api/v1/users/non-existent-user/notification-settings

### ❌ 18. 잘못된 요청 (400 테스트 - 빈 타임존)
PUT {{baseUrl}}/api/v1/users/{{userId}}/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": false,
  "pushEnabled": false,
  "timezone": "",
  "language": "",
  "quietHours": null,
  "channelSettings": null,
  "enabled": true,
  "channels": ["EMAIL"]
}

### 🌏 19. 다양한 타임존 테스트 (도쿄)
PUT {{baseUrl}}/api/v1/users/tokyo-user/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": true,
  "emailEnabled": true,
  "discordEnabled": true,
  "pushEnabled": false,
  "timezone": "Asia/Tokyo",
  "language": "ja",
  "quietHours": {
    "enabled": true,
    "startTime": "21:00",
    "endTime": "07:00",
    "weekendsOnly": false
  },
  "channelSettings": null,
  "enabled": true,
  "channels": ["EMAIL", "DISCORD"]
}

### 🌎 20. 다양한 타임존 테스트 (로스앤젤레스)
PUT {{baseUrl}}/api/v1/users/la-user/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": false,
  "pushEnabled": true,
  "timezone": "America/Los_Angeles",
  "language": "en",
  "quietHours": {
    "enabled": true,
    "startTime": "23:30",
    "endTime": "06:30",
    "weekendsOnly": true
  },
  "channelSettings": {
    "push": {
      "sound": "gentle",
      "vibration": true
    }
  },
  "enabled": true,
  "channels": ["EMAIL", "PUSH"]
}

### 🧪 21. 도메인 로직 테스트 - 잘못된 방해금지 시간 형식
PUT {{baseUrl}}/api/v1/users/invalid-time-test/notification-settings
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": false,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": true,
    "startTime": "invalid-time",
    "endTime": "invalid-time",
    "weekendsOnly": false
  }
}

### 📈 22. 설정 통계 조회 - 채널별 활성화율
GET {{baseUrl}}/api/v1/notification-settings/statistics/channel-activation

### 📈 23. 설정 통계 조회 - 방해금지 시간 사용률
GET {{baseUrl}}/api/v1/notification-settings/statistics/quiet-hours-usage

### 🔧 24. 설정 유효성 검증 API
POST {{baseUrl}}/api/v1/notification-settings/validate
Content-Type: application/json

{
  "studyUpdates": true,
  "marketing": false,
  "emailEnabled": true,
  "discordEnabled": false,
  "pushEnabled": false,
  "timezone": "Asia/Seoul",
  "language": "ko",
  "quietHours": {
    "enabled": true,
    "startTime": "22:00",
    "endTime": "08:00",
    "weekendsOnly": false
  }
}
